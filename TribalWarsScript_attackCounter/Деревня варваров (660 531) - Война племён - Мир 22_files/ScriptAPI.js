/*75b8fa255304c4d2a6650dfe09bd59ce*/
var ScriptAPI={active:[],url:'',version:null,register:function(scriptname,version,author,email){var checkParam=function(key,value){if(!value)throw 'ScriptAPI: parameter (\''+key+'\') requires a value.'};if(ScriptAPI.url=='')return;checkParam('scriptname',scriptname);checkParam('version',version);checkParam('author',author);checkParam('email',email);if(typeof version=='number')version=[version];var script={scriptname:scriptname,version:version,author:author,email:email,broken:false},existing=false,incomatibel=true;for(var i in ScriptAPI.active)if(ScriptAPI.active[i].scriptname==scriptname){existing=true;script=ScriptAPI.active[i]};if(!existing){ScriptAPI.active.push(script);ScriptAPI.save(script)};$.each(version,function(i,v){if(v==ScriptAPI.version)incomatibel=false});if(!script.broken&&incomatibel){script.broken=true;ScriptAPI.notify(script);throw 'Version incompatible!'}},notify:function(script){var scriptlink=$('<li>').text(escapeHtml(script.scriptname)+' ');scriptlink.append($('<a>').attr('href',escapeHtml('mailto:'+script.email)).text('(Автор:'+escapeHtml(script.author)+')'));$('#script_list').append(scriptlink);$('#script_warning').show()},save:function(script){$.post(ScriptAPI.url,script)}}